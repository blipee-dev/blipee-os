<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Strength Meter Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .test-section {
            margin-bottom: 30px;
        }

        .test-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .input-wrapper {
            position: relative;
            margin-bottom: 15px;
        }

        input[type="text"] {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .strength-meter {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .strength-bar-container {
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .strength-bar {
            height: 100%;
            transition: all 0.3s ease;
            border-radius: 10px;
        }

        .strength-label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 14px;
        }

        .strength-label .icon {
            font-size: 16px;
        }

        .feedback {
            font-size: 13px;
            color: #666;
            margin-top: 8px;
        }

        .feedback-item {
            display: flex;
            align-items: start;
            gap: 8px;
            margin-top: 6px;
        }

        .crack-time {
            font-size: 12px;
            color: #888;
            margin-top: 8px;
        }

        /* Color schemes for strength levels */
        .strength-0 { background: #ef4444; color: #dc2626; }
        .strength-1 { background: #f97316; color: #ea580c; }
        .strength-2 { background: #eab308; color: #ca8a04; }
        .strength-3 { background: #3b82f6; color: #2563eb; }
        .strength-4 { background: #10b981; color: #059669; }

        .test-results {
            margin-top: 40px;
            padding: 20px;
            background: #f0f9ff;
            border-radius: 10px;
            border-left: 4px solid #3b82f6;
        }

        .test-results h3 {
            color: #1e3a8a;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .test-case {
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .test-case-password {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #333;
        }

        .test-case-result {
            margin-top: 6px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-icon {
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Password Strength Meter Test</h1>
        <p class="subtitle">Testing zxcvbn integration and visual feedback</p>

        <div class="test-section">
            <div class="test-label">Try typing different passwords:</div>
            <div class="input-wrapper">
                <input
                    type="text"
                    id="passwordInput"
                    placeholder="Type a password to see strength analysis..."
                    autocomplete="off"
                >
            </div>
            <div id="strengthDisplay" class="strength-meter" style="display: none;">
                <div class="strength-label">
                    <span class="icon" id="strengthIcon"></span>
                    <span id="strengthText"></span>
                </div>
                <div class="strength-bar-container">
                    <div class="strength-bar" id="strengthBar"></div>
                </div>
                <div class="crack-time" id="crackTime"></div>
                <div class="feedback" id="feedback"></div>
            </div>
        </div>

        <div class="test-results">
            <h3>Automated Test Cases</h3>
            <div id="testCases"></div>
        </div>
    </div>

    <script>
        const strengthConfig = {
            0: { label: 'Very Weak', icon: '‚ö†Ô∏è', color: '#ef4444' },
            1: { label: 'Weak', icon: '‚ö†Ô∏è', color: '#f97316' },
            2: { label: 'Fair', icon: '‚ÑπÔ∏è', color: '#eab308' },
            3: { label: 'Good', icon: 'üõ°Ô∏è', color: '#3b82f6' },
            4: { label: 'Strong', icon: '‚úì', color: '#10b981' }
        };

        const input = document.getElementById('passwordInput');
        const display = document.getElementById('strengthDisplay');
        const bar = document.getElementById('strengthBar');
        const text = document.getElementById('strengthText');
        const icon = document.getElementById('strengthIcon');
        const crackTime = document.getElementById('crackTime');
        const feedback = document.getElementById('feedback');

        input.addEventListener('input', function() {
            const password = input.value;

            if (!password) {
                display.style.display = 'none';
                return;
            }

            display.style.display = 'block';

            // Run zxcvbn
            const result = zxcvbn(password, ['pedro', 'blipee', 'test', 'user']);
            const score = result.score;
            const config = strengthConfig[score];

            // Update UI
            const widthPercentage = ((score + 1) / 5) * 100;
            bar.style.width = widthPercentage + '%';
            bar.style.background = config.color;

            icon.textContent = config.icon;
            text.textContent = config.label;
            text.style.color = config.color;

            crackTime.textContent = `Time to crack: ${result.crack_times_display.offline_slow_hashing_1e4_per_second}`;

            // Feedback
            let feedbackHTML = '';
            if (result.feedback.warning) {
                feedbackHTML += `<div class="feedback-item">‚ö†Ô∏è ${result.feedback.warning}</div>`;
            }
            if (result.feedback.suggestions && result.feedback.suggestions.length > 0) {
                result.feedback.suggestions.forEach(suggestion => {
                    feedbackHTML += `<div class="feedback-item">üí° ${suggestion}</div>`;
                });
            }
            if (score >= 3) {
                feedbackHTML += `<div class="feedback-item" style="color: #10b981;">‚úì Great! This password is ${score === 4 ? 'very ' : ''}secure.</div>`;
            }
            feedback.innerHTML = feedbackHTML;
        });

        // Run automated tests
        const testCases = [
            { password: 'password', expected: 0, description: 'Common password' },
            { password: 'password123', expected: 0, description: 'Common password with numbers' },
            { password: 'qwerty', expected: 0, description: 'Keyboard pattern' },
            { password: 'Pedro123', expected: 1, description: 'Name with numbers' },
            { password: 'MyPassword2024', expected: 1, description: 'Dictionary word with year' },
            { password: 'Correct Horse Battery Staple', expected: 4, description: 'XKCD famous passphrase' },
            { password: 'MySecureP@ssw0rd2025!', expected: 3, description: 'Complex password' },
            { password: 'aB3$fG7*kL9#pQ2@', expected: 4, description: 'Random characters' },
            { password: '12345678', expected: 0, description: 'Sequential numbers' },
            { password: 'BlipeeRocks2025!@#', expected: 3, description: 'Brand + year + symbols' }
        ];

        const testContainer = document.getElementById('testCases');
        let passedTests = 0;
        let totalTests = testCases.length;

        testCases.forEach((test, index) => {
            const result = zxcvbn(test.password, ['pedro', 'blipee', 'test', 'user']);
            const score = result.score;
            const passed = Math.abs(score - test.expected) <= 1; // Allow ¬±1 variance
            const config = strengthConfig[score];

            if (passed) passedTests++;

            const testCase = document.createElement('div');
            testCase.className = 'test-case';
            testCase.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div class="test-case-password">"${test.password}"</div>
                        <div style="font-size: 12px; color: #666; margin-top: 4px;">${test.description}</div>
                    </div>
                    <div style="text-align: right;">
                        <span class="status-icon">${passed ? '‚úÖ' : '‚ö†Ô∏è'}</span>
                    </div>
                </div>
                <div class="test-case-result">
                    <span class="badge" style="background: ${config.color}20; color: ${config.color};">
                        ${config.icon} ${config.label}
                    </span>
                    <span style="font-size: 12px; color: #888;">
                        ${result.crack_times_display.offline_slow_hashing_1e4_per_second}
                    </span>
                </div>
            `;
            testContainer.appendChild(testCase);
        });

        // Add summary
        const summary = document.createElement('div');
        summary.style.cssText = 'margin-top: 15px; padding: 12px; background: #dbeafe; border-radius: 8px; text-align: center; font-weight: 600;';
        summary.innerHTML = `
            Test Results: ${passedTests}/${totalTests} passed
            (${((passedTests/totalTests) * 100).toFixed(0)}% success rate)
        `;
        testContainer.appendChild(summary);
    </script>
</body>
</html>
